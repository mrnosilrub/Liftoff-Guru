---
import Base from "../../layouts/Base.astro";
const modules = import.meta.glob("../../content/projects/*.mdx", { eager: true });
const projects = Object.values(modules);
const types = ["App", "SaaS", "Content", "Research", "Experiment"];
const statuses = ["Launched", "In Progress", "Archived"];
---
<Base title="Projects â€” Liftoff.Guru">
  <section class="py-10">
    <h1 class="text-3xl font-bold">All Projects</h1>

    <div class="mt-6 flex flex-wrap gap-3 text-sm">
      <select id="type" class="rounded-md border border-zinc-800 bg-zinc-900/60 px-3 py-2">
        <option value="">Type: All</option>
        {types.map((t) => <option value={t}>{t}</option>)}
      </select>
      <select id="status" class="rounded-md border border-zinc-800 bg-zinc-900/60 px-3 py-2">
        <option value="">Status: All</option>
        {statuses.map((s) => <option value={s}>{s}</option>)}
      </select>
    </div>

    <div id="grid" class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {projects.map((p) => (
        <a
          href={`/projects/${p.frontmatter.slug}`}
          class="group rounded-xl border border-zinc-800/60 bg-zinc-900/40 p-4 hover:border-zinc-700"
          data-type={p.frontmatter.type}
          data-status={p.frontmatter.status}
        >
          <div class="aspect-video rounded-lg bg-zinc-800/60"></div>
          <h3 class="mt-3 font-semibold group-hover:text-white">{p.frontmatter.title}</h3>
          <p class="text-sm text-zinc-400">{p.frontmatter.tagline}</p>
          <div class="mt-2 flex gap-2">
            <span class="rounded-md border border-zinc-700 px-2 py-0.5 text-xs text-zinc-300">{p.frontmatter.type}</span>
            <span class="rounded-md border border-zinc-700 px-2 py-0.5 text-xs text-zinc-300">{p.frontmatter.status}</span>
          </div>
        </a>
      ))}
      {projects.length === 0 && <p class="text-zinc-400">No projects yet.</p>}
    </div>
  </section>

  <script type="module">
    const typeSel = document.getElementById('type');
    const statusSel = document.getElementById('status');
    const cards = Array.from(document.querySelectorAll('#grid > a'));

    function apply() {
      const type = typeSel.value;
      const status = statusSel.value;
      cards.forEach(c => {
        const okType = !type || c.dataset.type === type;
        const okStatus = !status || c.dataset.status === status;
        c.style.display = okType && okStatus ? '' : 'none';
      });
    }
    typeSel?.addEventListener('change', apply);
    statusSel?.addEventListener('change', apply);
  </script>
</Base>


